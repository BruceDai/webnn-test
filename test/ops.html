<html>
  <head>
    <meta charset="utf-8">
    <title>Supported Operations</title>
    <style>
      h1{
        font-family: 'Segoe UI', sans-serif;
        color: #fa7268;
      }
      #prefer{
        font-family: 'Segoe UI', sans-serif;
        /* color: #FA7268; */
      }
      #sub{
        width: 65%;
        height: 97%;
        float: right;
        display: none
      }
      #desc{
        background: #fceeed;
        font-family: 'Segoe UI', sans-serif;
      }
      #load{
        width: 50%;
        float:right;
      }
    </style>
  </head>
  <body>
    <div id="desc">https://brucedai.github.io/webnnt/test/add.html?prefer=fast</div>
    <iframe id="sub" src="https://brucedai.github.io/webnnt/test/add.html?prefer=fast" frameborder="0" onload="stateChange(this)"></iframe>
    <div id="load"><img src="/loading.gif"></div>
    <h1>Supported Operations</h1>
    <div id="prefer" onclick="setPrefer()">Preference:
      <input type="radio" name="prefer" value="fast" checked="checked">fast
      <input type="radio" name="prefer" value="sustained">sustained
      <input type="radio" name="prefer" value="low">low
    </div>
    <div id="test"></div>
  </body>

  <script type="text/javascript">
    'use strict';
    function stateChange(_frame) {
      var loader = document.getElementById("load");
      loader.style.display = "none";
      _frame.style.visibility = "visible";
      _frame.style.display = "block"
    }

    (function(){
      const linkList = {
        "ADD": "https://brucedai.github.io/webnnt/test/add.html",
        "AVERAGE_POOL_2D": "https://brucedai.github.io/webnnt/test/avg_pool_2d.html",
        "CONCATENATION": "https://brucedai.github.io/webnnt/test/concatenation.html",
        "CONV_2D": "https://brucedai.github.io/webnnt/test/conv_2d.html",
        "DEPTHWISE_CONV_2D": "https://brucedai.github.io/webnnt/test/depthwise_conv_2d.html",
        "FULLY_CONNECTED": "https://brucedai.github.io/webnnt/test/fully_connected.html",
        "MAX_POOL_2D": "https://brucedai.github.io/webnnt/test/max_pool_2d.html",
        "MUL": "https://brucedai.github.io/webnnt/test/mul.html",
        "RESHAPE": "https://brucedai.github.io/webnnt/test/reshape.html",
        "RESIZE_BILINEAR (without align_corners)": "https://brucedai.github.io/webnnt/test/resize_bilinear_without_align_corners.html",
        "RESIZE_BILINEAR (align_corners FALSE)": "https://brucedai.github.io/webnnt/test/resize_bilinear_with_align_corners_false.html",
        "RESIZE_BILINEAR (align_corners TRUE)": "https://brucedai.github.io/webnnt/test/resize_bilinear_with_align_corners_true.html",
        "SOFTMAX": "https://brucedai.github.io/webnnt/test/softmax.html",
        "ATROUS_CONV_2D": "https://brucedai.github.io/webnnt/test/atrous_conv_2d.html",
        "ATROUS_DEPTHWISE_CONV_2D": "https://brucedai.github.io/webnnt/test/atrous_depthwise_conv_2d.html",
        "TANH": "https://brucedai.github.io/webnnt/test/tanh.html",
        "MAXIMUM": "https://brucedai.github.io/webnnt/test/maximum.html",
        "TRANSPOSE": "https://brucedai.github.io/webnnt/test/transpose.html",
        "BATCH_TO_SPACE_ND": "https://brucedai.github.io/webnnt/test/batch_to_space_nd.html",
      };

      let currenturl = "https://brucedai.github.io/webnnt/test/add.html?prefer=";
      let iframe = document.getElementById('sub');
      window.changePrefer = function (obj) {
        function resetColor() {
          for (let l in linkList) {
            let div = document.getElementById(l);
            div.setAttribute('style', 'cursor: pointer; color: #FA7268; text-decoration:underline; font-family: Segoe UI, sans-serif');
          }
        }

        iframe.setAttribute('style', 'display: none;');
        document.getElementById('load').setAttribute('style', 'display: block;');
        
        let preferValue = document.querySelector('input[name="prefer"]:checked').value;
        currenturl = obj.getAttribute("value") + '?prefer=';
        iframe.src = currenturl + preferValue;
        let desc = document.getElementById('desc');
        desc.innerHTML = iframe.src;
        resetColor();
        obj.setAttribute('style', 'cursor: pointer; color: #368bff; text-decoration:underline; font-family: Segoe UI, sans-serif');
      };

      window.setPrefer = function() {
        iframe.setAttribute('style', 'display: none;');
        document.getElementById('load').setAttribute('style', 'display: block;');
        let preferValue = document.querySelector('input[name="prefer"]:checked').value;
        iframe.src = currenturl + preferValue;
        let desc = document.getElementById('desc');
        desc.innerHTML = iframe.src;
      };

      let test = document.getElementById("test");
      for (let t in linkList) {
        let div = document.createElement('p');
        div.setAttribute('id', t);
        div.setAttribute('value', linkList[t]);
        div.setAttribute('onclick', 'changePrefer(this)');
        div.setAttribute('style', 'cursor: pointer; color: #FA7268; text-decoration:underline; font-family: Segoe UI, sans-serif');
        div.innerHTML = t;
        test.appendChild(div);
      }
    })();
  </script>
</html>
